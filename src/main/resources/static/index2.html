<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Busca Automática ALC</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #000; /* Preto */
            color: #f00; /* Vermelho */
        }
        h1 { color: #f00; }
        .casa {
            display: inline-block;
            width: 20%;
            margin: 10px;
            padding: 20px;
            border: 2px solid #f00;
            background: #111; /* Preto escuro */
            color: #f00;
            text-align: center;
            vertical-align: top;
        }
        button {
            padding: 15px 30px;
            background: #f00; /* Vermelho */
            color: #000; /* Preto */
            border: none;
            cursor: pointer;
            font-size: 18px;
            margin-bottom: 20px;
        }
        button:hover { background: #c00; } /* Vermelho escuro */
        button:disabled { background: #666; cursor: not-allowed; }
        #status { margin-top: 20px; color: #f00; }
    </style>
</head>
<body>
<h1>Calibração Automática</h1>

<button id="runBtn" onclick="executarChecagem()">Rodar</button>

<div id="casas" style="display: none;">

    <h1> MTX1 </h1>
    <div class="casa">
        <h3>Frequência</h3>
        <p id="frequencia1">Carregando...</p>
    </div>
    <div class="casa">
        <h3>Status ALC</h3>
        <p id="statusAlc1">Carregando...</p>
    </div>
    <div class="casa">
        <h3>Valor Output DAC</h3>
        <p id="outputDac1">Carregando...</p>
    </div>
    <div class="casa">
        <h3>Valor Desired DAC</h3>
        <p id="desiredDac1">Carregando...</p>
    </div>

    <h1> MTX2 </h1>
    <div class="casa">
        <h3>Frequência</h3>
        <p id="frequencia2">Carregando...</p>
    </div>
    <div class="casa">
        <h3>Status ALC</h3>
        <p id="statusAlc2">Carregando...</p>
    </div>
    <div class="casa">
        <h3>Valor Output DAC</h3>
        <p id="outputDac2">Carregando...</p>
    </div>
    <div class="casa">
        <h3>Valor Desired DAC</h3>
        <p id="desiredDac2">Carregando...</p>
    </div>

    <h1> MTX3 </h1>
    <div class="casa">
        <h3>Frequência</h3>
        <p id="frequencia3">Carregando...</p>
    </div>
    <div class="casa">
        <h3>Status ALC</h3>
        <p id="statusAlc3">Carregando...</p>
    </div>
    <div class="casa">
        <h3>Valor Output DAC</h3>
        <p id="outputDac3">Carregando...</p>
    </div>
    <div class="casa">
        <h3>Valor Desired DAC</h3>
        <p id="desiredDac3">Carregando...</p>
    </div>

    <h1> MTX4 </h1>
    <div class="casa">
        <h3>Frequência</h3>
        <p id="frequencia4">Carregando...</p>
    </div>
    <div class="casa">
        <h3>Status ALC</h3>
        <p id="statusAlc4">Carregando...</p>
    </div>
    <div class="casa">
        <h3>Valor Output DAC</h3>
        <p id="outputDac4">Carregando...</p>
    </div>
    <div class="casa">
        <h3>Valor Desired DAC</h3>
        <p id="desiredDac4">Carregando...</p>
    </div>
</div>

<div id="status"></div>

<script>
    async function executarChecagem() {
        const runBtn = document.getElementById('runBtn');
        runBtn.disabled = true;
        runBtn.textContent = 'Executando...';

        const url = 'http://localhost:8087/funcaoAlc';
        const statusDiv = document.getElementById('status');
        const casasDiv = document.getElementById('casas');

        statusDiv.textContent = 'Carregando dados...';
        casasDiv.style.display = 'block';

        try {
            const response = await fetch(url);
            if (!response.ok) throw new Error(`Erro HTTP: ${response.status}`);
            const data = await response.json();

            // Preencher as casas com os valores
            document.getElementById('frequencia1').textContent = data.frequencia1 || 'N/A';
            document.getElementById('statusAlc1').textContent = data.statusAlc1 || 'N/A';
            document.getElementById('outputDac1').textContent = data.valorOutputDac1 || 'N/A';
            document.getElementById('desiredDac1').textContent = data.valorDesiredDac1 || 'N/A';

            document.getElementById('frequencia2').textContent = data.frequencia2 || 'N/A';
            document.getElementById('statusAlc2').textContent = data.statusAlc2 || 'N/A';
            document.getElementById('outputDac2').textContent = data.valorOutputDac2 || 'N/A';
            document.getElementById('desiredDac2').textContent = data.valorDesiredDac2 || 'N/A';

            document.getElementById('frequencia3').textContent = data.frequencia3 || 'N/A';
            document.getElementById('statusAlc3').textContent = data.statusAlc3 || 'N/A';
            document.getElementById('outputDac3').textContent = data.valorOutputDac3 || 'N/A';
            document.getElementById('desiredDac3').textContent = data.valorDesiredDac3 || 'N/A';

            document.getElementById('frequencia4').textContent = data.frequencia4 || 'N/A';
            document.getElementById('statusAlc4').textContent = data.statusAlc4 || 'N/A';
            document.getElementById('outputDac4').textContent = data.valorOutputDac4 || 'N/A';
            document.getElementById('desiredDac4').textContent = data.valorDesiredDac4 || 'N/A';

            statusDiv.textContent = data.status || 'Dados carregados com sucesso';
        } catch (error) {
            statusDiv.textContent = `Erro: ${error.message}`;
            casasDiv.style.display = 'none';
        } finally {
            runBtn.disabled = false;
            runBtn.textContent = 'Rodar';
        }
    }
</script>
</body>
</html>
